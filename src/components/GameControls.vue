<template>
  <div class="controls-area">
    <div class="segmented-control">
      <button :class="{ active: mode === 'learning' }" @click="$emit('update:mode', 'learning')">–£—á–∏—Ç—å</button>
      <button :class="{ active: mode === 'test' }" @click="$emit('update:mode', 'test')">–¢–µ—Å—Ç</button>
      <button :class="{ active: mode === 'blitz' }" @click="$emit('update:mode', 'blitz')">‚ö° –ë–ª–∏—Ü</button>
    </div>

    <button
      v-if="mistakesCount > 0 && mode !== 'mistakes' && mode !== 'learning'"
      class="mistakes-btn"
      @click="$emit('update:mode', 'mistakes')"
    >
      ü©π –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫–∏ ({{ mistakesCount }})
    </button>

    <div class="difficulty-selector" v-if="showDifficulty">
      <div class="chips-row">
        <button
          v-for="opt in difficultyOptions"
          :key="opt.value"
          class="chip"
          :class="{ active: currentDifficulty === opt.value }"
          @click="$emit('update:currentDifficulty', opt.value)"
        >
          {{ opt.label }}
        </button>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
export interface DifficultyOption {
  label: string;
  value: number;
}

defineProps<{
  mode: string;
  mistakesCount: number;
  showDifficulty?: boolean; // –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ª–∏ —á–∏–ø—Å—ã
  currentDifficulty?: number; // –¢–µ–∫—É—â–µ–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–µ —á–∏—Å–ª–æ
  difficultyOptions?: DifficultyOption[]; // –í–∞—Ä–∏–∞–Ω—Ç—ã { label: '–¥–æ 10', value: 10 }
}>();

defineEmits(['update:mode', 'update:currentDifficulty']);
</script>

<style scoped>
/* –°—Ç–∏–ª–∏ –±–µ—Ä—É—Ç—Å—è –∏–∑ main.css */
</style>
